<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Pico UART GPIO Hub: src/server/input.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Pico UART GPIO Hub
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('input_8c.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">input.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implements utility functions for user input via USB CLI.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &quot;pico/stdio.h&quot;</code><br />
<code>#include &quot;pico/error.h&quot;</code><br />
<code>#include &quot;<a class="el" href="input_8h_source.html">input.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="server_8h_source.html">server.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="menu_8h_source.html">menu.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a7f61b9971eaf8feabafd3d8514e73b10" id="r_a7f61b9971eaf8feabafd3d8514e73b10"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7f61b9971eaf8feabafd3d8514e73b10">flush_stdin</a> (void)</td></tr>
<tr class="memdesc:a7f61b9971eaf8feabafd3d8514e73b10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears any characters from the input buffer.  <br /></td></tr>
<tr class="memitem:a12336fa1d3799b3ab74111cf69e738c6" id="r_a12336fa1d3799b3ab74111cf69e738c6"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a12336fa1d3799b3ab74111cf69e738c6">string_to_uint32</a> (const char *str, uint32_t *out)</td></tr>
<tr class="memdesc:a12336fa1d3799b3ab74111cf69e738c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a numeric string to an unsigned 32-bit integer.  <br /></td></tr>
<tr class="memitem:a22e757ab2267a53357e2f7bad8822e19" id="r_a22e757ab2267a53357e2f7bad8822e19"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a22e757ab2267a53357e2f7bad8822e19">read_uint32_line</a> (uint32_t *out)</td></tr>
<tr class="memdesc:a22e757ab2267a53357e2f7bad8822e19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads an unsigned integer from standard input (stdin).  <br /></td></tr>
<tr class="memitem:a702b970862b9f18deb5d70533c401ad9" id="r_a702b970862b9f18deb5d70533c401ad9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a702b970862b9f18deb5d70533c401ad9">read_user_choice_in_range</a> (const char *message, uint32_t *out, uint32_t min, uint32_t max)</td></tr>
<tr class="memdesc:a702b970862b9f18deb5d70533c401ad9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prompts the user to enter a number within a specified range. Displays a message, reads the input, and validates that it's within [min, max].  <br /></td></tr>
<tr class="memitem:a182880d2f79c720c70214b364872e7cc" id="r_a182880d2f79c720c70214b364872e7cc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a182880d2f79c720c70214b364872e7cc">choose_menu_option</a> (uint32_t *menu_option)</td></tr>
<tr class="memdesc:a182880d2f79c720c70214b364872e7cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prompts the user to select a menu option from the main CLI.  <br /></td></tr>
<tr class="memitem:af3a98829b85398269452f3597ed70b54" id="r_af3a98829b85398269452f3597ed70b54"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af3a98829b85398269452f3597ed70b54">choose_reset_variant</a> (uint32_t *reset_variant)</td></tr>
<tr class="memdesc:af3a98829b85398269452f3597ed70b54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prompts the user to choose a reset type.  <br /></td></tr>
<tr class="memitem:a46b337a3d71715a151a467d7e227ee74" id="r_a46b337a3d71715a151a467d7e227ee74"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a46b337a3d71715a151a467d7e227ee74">read_reset_variant</a> (uint32_t *reset_variant)</td></tr>
<tr class="memdesc:a46b337a3d71715a151a467d7e227ee74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a reset variant option from the user.  <br /></td></tr>
<tr class="memitem:a5586b11042eb1eb03d91ff87ffc47cc2" id="r_a5586b11042eb1eb03d91ff87ffc47cc2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5586b11042eb1eb03d91ff87ffc47cc2">choose_flash_configuration_index</a> (uint32_t *flash_configuration_index)</td></tr>
<tr class="memdesc:a5586b11042eb1eb03d91ff87ffc47cc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prompts the user to select a preset configuration index.  <br /></td></tr>
<tr class="memitem:a61c1fc66dd2cfefa4aa647bfbcb0c6c0" id="r_a61c1fc66dd2cfefa4aa647bfbcb0c6c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a61c1fc66dd2cfefa4aa647bfbcb0c6c0">read_flash_configuration_index</a> (uint32_t *flash_configuration_index)</td></tr>
<tr class="memdesc:a61c1fc66dd2cfefa4aa647bfbcb0c6c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Repeatedly prompts the user to select a valid preset configuration index.  <br /></td></tr>
<tr class="memitem:afab3036de9b81ab6f1754aeea4d98ecc" id="r_afab3036de9b81ab6f1754aeea4d98ecc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afab3036de9b81ab6f1754aeea4d98ecc">choose_state</a> (uint32_t *device_state)</td></tr>
<tr class="memdesc:afab3036de9b81ab6f1754aeea4d98ecc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prompts the user to enter a desired state: ON (1) or OFF (0).  <br /></td></tr>
<tr class="memitem:aa76c5e5fa0709633c7a4ba38e05e1f4a" id="r_aa76c5e5fa0709633c7a4ba38e05e1f4a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa76c5e5fa0709633c7a4ba38e05e1f4a">read_device_state</a> (uint32_t *device_state)</td></tr>
<tr class="memdesc:aa76c5e5fa0709633c7a4ba38e05e1f4a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a valid ON/OFF state input from the user.  <br /></td></tr>
<tr class="memitem:a7582e5052e473d4a6865157f03c5a601" id="r_a7582e5052e473d4a6865157f03c5a601"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7582e5052e473d4a6865157f03c5a601">choose_client</a> (uint32_t *client_index)</td></tr>
<tr class="memdesc:a7582e5052e473d4a6865157f03c5a601"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prompts the user to choose which connected client to access.  <br /></td></tr>
<tr class="memitem:a019a343d9f2156dcfb94a46a77bf100b" id="r_a019a343d9f2156dcfb94a46a77bf100b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a019a343d9f2156dcfb94a46a77bf100b">read_client_index</a> (uint32_t *client_index)</td></tr>
<tr class="memdesc:a019a343d9f2156dcfb94a46a77bf100b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prompts the user to select a client index.  <br /></td></tr>
<tr class="memitem:a11434c249f4453a58c1a01b74327a9ab" id="r_a11434c249f4453a58c1a01b74327a9ab"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a11434c249f4453a58c1a01b74327a9ab">choose_device</a> (uint32_t *device_index, const <a class="el" href="structclient__state__t.html">client_state_t</a> *client_state)</td></tr>
<tr class="memdesc:a11434c249f4453a58c1a01b74327a9ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prompts the user to select a GPIO device to modify.  <br /></td></tr>
<tr class="memitem:a2c534d4ff34a6dd932f657cb7c93ba98" id="r_a2c534d4ff34a6dd932f657cb7c93ba98"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2c534d4ff34a6dd932f657cb7c93ba98">read_device_index</a> (uint32_t *device_index, uint32_t flash_client_index, const <a class="el" href="structserver__persistent__state__t.html">server_persistent_state_t</a> *flash_state, const <a class="el" href="structclient__state__t.html">client_state_t</a> *client_state)</td></tr>
<tr class="memdesc:a2c534d4ff34a6dd932f657cb7c93ba98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads a valid device index from the user for a given client.  <br /></td></tr>
<tr class="memitem:abb433e2d73c7e2d703854998bc371969" id="r_abb433e2d73c7e2d703854998bc371969"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abb433e2d73c7e2d703854998bc371969">read_client_data</a> (<a class="el" href="structinput__client__data__t.html">input_client_data_t</a> *client_data, <a class="el" href="structclient__input__flags__t.html">client_input_flags_t</a> client_input_flags)</td></tr>
<tr class="memdesc:abb433e2d73c7e2d703854998bc371969"><td class="mdescLeft">&#160;</td><td class="mdescRight">Collects validated input from the user for client-related operations.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implements utility functions for user input via USB CLI. </p>
<p>This module provides routines for reading and validating numeric input from the user, typically through a serial USB interface. It includes internal helpers for flushing input, parsing strings into integers, and enforcing valid ranges.</p>
<p>Used by the server for CLI interaction with the user (e.g., GPIO selection). </p>
</div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a7582e5052e473d4a6865157f03c5a601" name="a7582e5052e473d4a6865157f03c5a601"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7582e5052e473d4a6865157f03c5a601">&#9670;&#160;</a></span>choose_client()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool choose_client </td>
          <td>(</td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>client_index</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prompts the user to choose which connected client to access. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client_index</td><td>Output pointer for selected index (1-based). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if valid client selected, false otherwise. </dd></dl>

</div>
</div>
<a id="a11434c249f4453a58c1a01b74327a9ab" name="a11434c249f4453a58c1a01b74327a9ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11434c249f4453a58c1a01b74327a9ab">&#9670;&#160;</a></span>choose_device()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool choose_device </td>
          <td>(</td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>device_index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structclient__state__t.html">client_state_t</a> *</td>          <td class="paramname"><span class="paramname"><em>client_state</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prompts the user to select a GPIO device to modify. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device_index</td><td>Output pointer for selected index (1-based). </td></tr>
    <tr><td class="paramname">client_state</td><td>The state structure of the selected client. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if valid device selected, false otherwise. </dd></dl>

</div>
</div>
<a id="a5586b11042eb1eb03d91ff87ffc47cc2" name="a5586b11042eb1eb03d91ff87ffc47cc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5586b11042eb1eb03d91ff87ffc47cc2">&#9670;&#160;</a></span>choose_flash_configuration_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool choose_flash_configuration_index </td>
          <td>(</td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>flash_configuration_index</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prompts the user to select a preset configuration index. </p>
<p>Displays a cancel option and asks the user to choose a preset index within valid bounds.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flash_configuration_index</td><td>Output pointer to store the selected preset index. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if valid input received, false otherwise. </dd></dl>

</div>
</div>
<a id="a182880d2f79c720c70214b364872e7cc" name="a182880d2f79c720c70214b364872e7cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a182880d2f79c720c70214b364872e7cc">&#9670;&#160;</a></span>choose_menu_option()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool choose_menu_option </td>
          <td>(</td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>menu_option</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prompts the user to select a menu option from the main CLI. </p>
<p>This function displays a message prompting the user to pick a number between 1 and 9, representing the available menu options. It reads and validates the input, and stores the selected option in <span class="tt">menu_option</span>.</p>
<p>The valid range is:</p><ul>
<li>1: Display clients</li>
<li>2: Set client's device</li>
<li>3: Toggle client's device</li>
<li>4: Save running state into preset configuration</li>
<li>5: Build and save preset configuration</li>
<li>6: Load preset configuration into running state</li>
<li>7: Reset configuration</li>
<li>8: Clear Screen</li>
<li>9. Restart System</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">menu_option</td><td>Pointer to store the selected menu option. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if a valid input was received, false otherwise. </dd></dl>

</div>
</div>
<a id="af3a98829b85398269452f3597ed70b54" name="af3a98829b85398269452f3597ed70b54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3a98829b85398269452f3597ed70b54">&#9670;&#160;</a></span>choose_reset_variant()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool choose_reset_variant </td>
          <td>(</td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>reset_variant</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prompts the user to choose a reset type. </p>
<ul>
<li>Displays the available reset options:<ol type="1">
<li>Running state</li>
<li>Preset configurations</li>
<li>All client data</li>
</ol>
</li>
<li>Uses range-validated input to ensure a valid selection.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reset_variant</td><td>Pointer to the output variable for the selected option. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if a valid option was selected, false otherwise. </dd></dl>

</div>
</div>
<a id="afab3036de9b81ab6f1754aeea4d98ecc" name="afab3036de9b81ab6f1754aeea4d98ecc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afab3036de9b81ab6f1754aeea4d98ecc">&#9670;&#160;</a></span>choose_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool choose_state </td>
          <td>(</td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>device_state</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prompts the user to enter a desired state: ON (1) or OFF (0). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device_state</td><td>Pointer to store the selected boolean state. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if valid input received, false otherwise. </dd></dl>

</div>
</div>
<a id="a7f61b9971eaf8feabafd3d8514e73b10" name="a7f61b9971eaf8feabafd3d8514e73b10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f61b9971eaf8feabafd3d8514e73b10">&#9670;&#160;</a></span>flush_stdin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void flush_stdin </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clears any characters from the input buffer. </p>
<p>Useful to prevent leftover characters from interfering with new input. </p>

</div>
</div>
<a id="abb433e2d73c7e2d703854998bc371969" name="abb433e2d73c7e2d703854998bc371969"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb433e2d73c7e2d703854998bc371969">&#9670;&#160;</a></span>read_client_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool read_client_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structinput__client__data__t.html">input_client_data_t</a> *</td>          <td class="paramname"><span class="paramname"><em>client_data</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structclient__input__flags__t.html">client_input_flags_t</a></td>          <td class="paramname"><span class="paramname"><em>client_input_flags</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Collects validated input from the user for client-related operations. </p>
<p>This function performs multiple user interactions based on the provided <span class="tt"><a class="el" href="structclient__input__flags__t.html" title="Specifies which user inputs should be collected when interacting with a client.">client_input_flags_t</a></span>. It reads values such as client index, device index, GPIO state, preset configuration index, or reset choice, and stores them into a <span class="tt"><a class="el" href="structinput__client__data__t.html" title="Stores all user-selected input values required for client-related operations.">input_client_data_t</a></span> structure.</p>
<p>If <span class="tt">build_preset</span> is true, the function also calls <span class="tt"><a class="el" href="state__apply_8c.html#a27c7ce597f04b517c865ad20d34956a8" title="Configures the devices for a given client and preset configuration index.">set_configuration_devices()</a></span> automatically.</p>
<p>This function short-circuits (returns early) if any step is canceled or receives invalid input.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">client_data</td><td>Pointer to the structure where the input values will be stored. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">client_input_flags</td><td>Specifies which inputs are required (see <span class="tt"><a class="el" href="structclient__input__flags__t.html" title="Specifies which user inputs should be collected when interacting with a client.">client_input_flags_t</a></span>). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a019a343d9f2156dcfb94a46a77bf100b" name="a019a343d9f2156dcfb94a46a77bf100b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a019a343d9f2156dcfb94a46a77bf100b">&#9670;&#160;</a></span>read_client_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void read_client_index </td>
          <td>(</td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>client_index</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prompts the user to select a client index. </p>
<p>Repeats until a valid client is selected or cancel (0) is entered.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client_index</td><td>Output pointer to store the selected client index (1-based). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2c534d4ff34a6dd932f657cb7c93ba98" name="a2c534d4ff34a6dd932f657cb7c93ba98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c534d4ff34a6dd932f657cb7c93ba98">&#9670;&#160;</a></span>read_device_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void read_device_index </td>
          <td>(</td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>device_index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>flash_client_index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structserver__persistent__state__t.html">server_persistent_state_t</a> *</td>          <td class="paramname"><span class="paramname"><em>flash_state</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structclient__state__t.html">client_state_t</a> *</td>          <td class="paramname"><span class="paramname"><em>client_state</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads a valid device index from the user for a given client. </p>
<p>This function loops until the user provides a valid device index (or 0 to cancel). It checks if the selected index is valid for the given client using the server's persistent state and the client's current state.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">device_index</td><td>Pointer to the variable where the selected device index will be stored. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flash_client_index</td><td>Index of the client in the flash-stored client list. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flash_state</td><td>Pointer to the full persistent server state structure. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">client_state</td><td>Pointer to the current runtime state of the active client. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa76c5e5fa0709633c7a4ba38e05e1f4a" name="aa76c5e5fa0709633c7a4ba38e05e1f4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa76c5e5fa0709633c7a4ba38e05e1f4a">&#9670;&#160;</a></span>read_device_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void read_device_state </td>
          <td>(</td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>device_state</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads a valid ON/OFF state input from the user. </p>
<p>Prompts until a valid binary state is selected (0 or 1).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device_state</td><td>Output pointer to store the selected state (true = ON, false = OFF). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a61c1fc66dd2cfefa4aa647bfbcb0c6c0" name="a61c1fc66dd2cfefa4aa647bfbcb0c6c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61c1fc66dd2cfefa4aa647bfbcb0c6c0">&#9670;&#160;</a></span>read_flash_configuration_index()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void read_flash_configuration_index </td>
          <td>(</td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>flash_configuration_index</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Repeatedly prompts the user to select a valid preset configuration index. </p>
<ul>
<li>Displays the list of available preset configuration slots.</li>
<li>Loops until a valid selection is made via <span class="tt"><a class="el" href="input_8h.html#a5586b11042eb1eb03d91ff87ffc47cc2" title="Prompts the user to select a preset configuration index.">choose_flash_configuration_index()</a></span>.</li>
<li>Stores the final selection in <span class="tt">flash_configuration_index</span>.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flash_configuration_index</td><td>Output pointer for selected configuration index (1-based from user input). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a46b337a3d71715a151a467d7e227ee74" name="a46b337a3d71715a151a467d7e227ee74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46b337a3d71715a151a467d7e227ee74">&#9670;&#160;</a></span>read_reset_variant()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void read_reset_variant </td>
          <td>(</td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>reset_variant</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads a reset variant option from the user. </p>
<p>Prompts the user with a menu to choose what part of the client should be reset. Keeps asking until a valid input is provided or the user cancels with 0.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reset_variant</td><td>Pointer to store the selected option. Valid values:<ul>
<li>0: Cancel</li>
<li>1: Reset running configuration</li>
<li>2: Reset preset configurations</li>
<li>3: Reset all client data </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a22e757ab2267a53357e2f7bad8822e19" name="a22e757ab2267a53357e2f7bad8822e19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22e757ab2267a53357e2f7bad8822e19">&#9670;&#160;</a></span>read_uint32_line()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool read_uint32_line </td>
          <td>(</td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>out</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Reads an unsigned integer from standard input (stdin). </p>
<p>Flushes any previous characters, then reads input until newline (<span class="tt">\n</span> or <span class="tt">\r</span>) or buffer limit. Calls <span class="tt"><a class="el" href="#a12336fa1d3799b3ab74111cf69e738c6" title="Converts a numeric string to an unsigned 32-bit integer.">string_to_uint32()</a></span> to parse the result.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">out</td><td>Pointer to store the parsed result. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if parsing was successful and result is a valid uint32_t, false otherwise. </dd></dl>

</div>
</div>
<a id="a702b970862b9f18deb5d70533c401ad9" name="a702b970862b9f18deb5d70533c401ad9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a702b970862b9f18deb5d70533c401ad9">&#9670;&#160;</a></span>read_user_choice_in_range()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool read_user_choice_in_range </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>message</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>out</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>min</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>max</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prompts the user to enter a number within a specified range. Displays a message, reads the input, and validates that it's within [min, max]. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">message</td><td>The message to display as a prompt </td></tr>
    <tr><td class="paramname">out</td><td>Pointer where the resulting number will be stored </td></tr>
    <tr><td class="paramname">min</td><td>Minimum allowed value (inclusive) </td></tr>
    <tr><td class="paramname">max</td><td>Maximum allowed value (inclusive) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the input is valid and within range, false otherwise </dd></dl>

</div>
</div>
<a id="a12336fa1d3799b3ab74111cf69e738c6" name="a12336fa1d3799b3ab74111cf69e738c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12336fa1d3799b3ab74111cf69e738c6">&#9670;&#160;</a></span>string_to_uint32()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool string_to_uint32 </td>
          <td>(</td>
          <td class="paramtype">const char *</td>          <td class="paramname"><span class="paramname"><em>str</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *</td>          <td class="paramname"><span class="paramname"><em>out</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Converts a numeric string to an unsigned 32-bit integer. </p>
<p>Ignores leading spaces. Returns false if the string is empty, contains non-digit characters, contains leading zeros or if an overflow would occur.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">str</td><td>Pointer to the input string. </td></tr>
    <tr><td class="paramname">out</td><td>Pointer to the variable where the result will be stored. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if the conversion was successful, false otherwise. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a href="dir_075bb3ff235063c77951cd176d15a741.html">server</a></li><li class="navelem"><a href="input_8c.html">input.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>

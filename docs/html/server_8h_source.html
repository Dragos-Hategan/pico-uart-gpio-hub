<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Pico UART GPIO Hub: include/server.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Pico UART GPIO Hub
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('server_8h_source.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">server.h</div></div>
</div><!--header-->
<div class="contents">
<a href="server_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span> </div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#ifndef SERVER_H</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#define SERVER_H</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span> </div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span> </div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &quot;hardware/uart.h&quot;</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &quot;pico/multicore.h&quot;</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span> </div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="preprocessor">#include &quot;<a class="code" href="menu_8h.html">menu.h</a>&quot;</span></div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#include &quot;<a class="code" href="types_8h.html">types.h</a>&quot;</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#include &quot;<a class="code" href="config_8h.html">config.h</a>&quot;</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span> </div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span><span class="preprocessor">#ifndef UART_SPINLOCK_ID</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno"><a class="line" href="server_8h.html#ae0cb76c73e0b10cd0a339a3d50189a6c">   33</a></span><span class="preprocessor">#define UART_SPINLOCK_ID 0</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span> </div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="keyword">extern</span> spin_lock_t *<a class="code hl_variable" href="server_2main_8c.html#af0fed1de099fc59d4959ea2425d4a1f9">uart_lock</a>;</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span><span class="keyword">extern</span> <a class="code hl_struct" href="structserver__uart__connection__t.html">server_uart_connection_t</a> <a class="code hl_variable" href="server__side__handshake_8c.html#ae4762df2fab238c5e19ac8fc390dd0f6">active_uart_server_connections</a>[<a class="code hl_define" href="config_8h.html#a2af0f36093c4b4dfb77395b7216135e1">MAX_SERVER_CONNECTIONS</a>];</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span><span class="keyword">extern</span> uint8_t <a class="code hl_variable" href="server__side__handshake_8c.html#aa1ef43f549692dec740d6140a38acbd1">active_server_connections_number</a>;</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span><span class="keywordtype">void</span> <a class="code hl_function" href="server_8h.html#ab855eab340123db70c04fa5c11b7a030">send_uart_message_safe</a>(uart_inst_t* uart, <a class="code hl_struct" href="structuart__pin__pair__t.html">uart_pin_pair_t</a> pins, <span class="keyword">const</span> <span class="keywordtype">char</span>* msg);</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span><span class="keywordtype">void</span> <a class="code hl_function" href="server_8h.html#ad2a8b81914e338148d4ca14af0dda019">send_wakeup_if_dormant</a>(uint32_t flash_client_index, <a class="code hl_struct" href="structserver__persistent__state__t.html">server_persistent_state_t</a> *<span class="keyword">const</span> state, <a class="code hl_struct" href="structuart__pin__pair__t.html">uart_pin_pair_t</a> pin_pair, uart_inst_t *<span class="keyword">const</span> uart);</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span><span class="keywordtype">void</span> <a class="code hl_function" href="server_8h.html#abf6b2d1e49b4c895c9672070cb2d1c98">send_dormant_flag_to_client</a>(uint8_t client_index);</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span><span class="keywordtype">void</span> <a class="code hl_function" href="server_8h.html#a5373fcd0050ee1a3cccb2d3f7096b489">signal_reset_for_all_clients</a>();</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span><span class="keywordtype">void</span> <a class="code hl_function" href="server_8h.html#a32876b443b0945b7f0a82cd1cb8dae68">send_fast_blink_onboard_led_to_clients</a>();</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span><span class="keywordtype">void</span> <a class="code hl_function" href="server_8h.html#ac3717ffc0c3e393f14d1114bb67a0a5e">send_dormant_to_standby_clients</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span><span class="keywordtype">void</span> <a class="code hl_function" href="server_8h.html#a85446e6a4007b664f2fb03cfa588e092">server_send_client_state</a>(<a class="code hl_struct" href="structuart__pin__pair__t.html">uart_pin_pair_t</a> pin_pair, uart_inst_t* uart, <span class="keyword">const</span> <a class="code hl_struct" href="structclient__state__t.html">client_state_t</a>* state);</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span><span class="keywordtype">void</span> <a class="code hl_function" href="server_8h.html#a5dc7da044bb632212f8b68cfaf3f598c">periodic_wakeup</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span></div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span><span class="keywordtype">bool</span> <a class="code hl_function" href="server_8h.html#abef816bc7a87ae61e1da71a2d0c5da91">server_find_connections</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span></div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span><span class="keywordtype">void</span> <a class="code hl_function" href="server_8h.html#a050f4f15325b256ffb95a79c912dcb09">server_set_device_state_and_update_flash</a>(<a class="code hl_struct" href="structuart__pin__pair__t.html">uart_pin_pair_t</a> pin_pair, uart_inst_t* uart_instance, uint8_t gpio_index, <span class="keywordtype">bool</span> device_state, uint32_t flash_client_index);</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span></div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span><span class="keywordtype">void</span> <a class="code hl_function" href="server_8h.html#a22814c8a3091271ff0f644b78fbf5bd3">save_running_configuration_into_preset_configuration</a>(uint32_t flash_configuration_index, uint32_t flash_client_index);</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span></div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span><span class="keywordtype">void</span> <a class="code hl_function" href="server_8h.html#a5d6522f51f2e82efecc7bc7554ade2d0">load_configuration_into_running_state</a>(uint32_t flash_configuration_index, uint32_t flash_client_index);</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span></div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span><span class="keywordtype">void</span> <a class="code hl_function" href="server_8h.html#abab7af7564d7d10ad8fd3e632066408e">set_configuration_devices</a>(uint32_t flash_client_index, uint32_t flash_configuration_index, <a class="code hl_struct" href="structinput__client__data__t.html">input_client_data_t</a> *client_data);</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span></div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span><span class="keywordtype">void</span> <a class="code hl_function" href="server_8h.html#a25bc83fc3a5ae9f2471e14000a7aabd1">reset_all_client_data</a>(uint32_t flash_client_index);</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span></div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span><span class="keywordtype">void</span> <a class="code hl_function" href="server_8h.html#aa248b21af874055c05e39588ac3b50b4">reset_running_configuration</a>(uint32_t flash_client_index);</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span></div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span><span class="keywordtype">void</span> <a class="code hl_function" href="server_8h.html#a6ba1f5041dc967797351dc7bb856df3b">reset_preset_configuration</a>(uint32_t flash_client_index, uint32_t flash_configuration_index);</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span></div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span><span class="keywordtype">void</span> <a class="code hl_function" href="server_8h.html#a3f6bebbfab4e97a7b23a5268f4d66869">server_configure_persistent_state</a>(<a class="code hl_struct" href="structserver__persistent__state__t.html">server_persistent_state_t</a> *server_persistent_state);</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span></div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span><span class="keywordtype">void</span> <a class="code hl_function" href="server_8h.html#a94d7bf2a7f0be569d87b14fe3524395d">server_reset_configuration</a>(<a class="code hl_struct" href="structclient__state__t.html">client_state_t</a> *client_state);</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span></div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span><span class="keywordtype">bool</span> <a class="code hl_function" href="server_8h.html#a725e67537885c5d35871e1875db7506c">load_server_state</a>(<a class="code hl_struct" href="structserver__persistent__state__t.html">server_persistent_state_t</a> *out_state);</div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span></div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span><span class="keywordtype">void</span> __not_in_flash_func(<a class="code hl_function" href="state__flash_8c.html#a8e07211acfc66931f993aef0c3c6c7fb">save_server_state</a>)(<span class="keyword">const</span> <a class="code hl_struct" href="structserver__persistent__state__t.html">server_persistent_state_t</a> *state_in);</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span></div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>uint32_t <a class="code hl_function" href="server_8h.html#a42c8df3599e5bf75f043b1d59e83e730">get_active_client_connection_index_from_flash_client_index</a>(uint32_t flash_client_index, <a class="code hl_struct" href="structserver__persistent__state__t.html">server_persistent_state_t</a> state);</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span></div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span><span class="keywordtype">void</span> <a class="code hl_function" href="server_8h.html#a86c2e540fb9fb9aa0d840f81679a5fdb">server_load_running_states_to_active_clients</a>(<span class="keywordtype">void</span>);</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span></div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span><span class="keywordtype">void</span> <a class="code hl_function" href="server_8h.html#a3824f1d29b9101a5d32bc4938d10305c">server_print_state_devices</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structclient__state__t.html">client_state_t</a> *client_state);</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span></div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span><span class="keywordtype">void</span> <a class="code hl_function" href="server_8h.html#ab0091cab79fc6a26dec5a260c238e5b5">server_print_running_client_state</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structclient__t.html">client_t</a> * client);</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span></div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span><span class="keywordtype">void</span> <a class="code hl_function" href="server_8h.html#aec66c7eb323e49b6801199d373793161">server_print_client_preset_configuration</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structclient__t.html">client_t</a> * client, uint8_t client_preset_index);</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span></div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span><span class="keywordtype">void</span> <a class="code hl_function" href="server_8h.html#af79794cc92a2bd9e49d0552ef190126c">server_print_client_preset_configurations</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structclient__t.html">client_t</a> * client);</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span></div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span><span class="keywordtype">bool</span> <a class="code hl_function" href="server_8h.html#abf00606cee7fb1a66191388be08ac24b">client_has_active_devices</a>(<a class="code hl_struct" href="structclient__t.html">client_t</a> client);</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span></div>
<div class="foldopen" id="foldopen00352" data-start="{" data-end="}">
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno"><a class="line" href="server_8h.html#a53e73d8096b04a30d2349aca5910e7e0">  352</a></span><span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code hl_function" href="server_8h.html#a53e73d8096b04a30d2349aca5910e7e0">find_corect_client_index_from_flash</a>(uint32_t *flash_client_index, uint32_t client_index, <span class="keyword">const</span> <a class="code hl_struct" href="structserver__persistent__state__t.html">server_persistent_state_t</a> *flash_state){</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>    <span class="keywordflow">for</span> (uint8_t index = 0; index &lt; <a class="code hl_define" href="config_8h.html#a2af0f36093c4b4dfb77395b7216135e1">MAX_SERVER_CONNECTIONS</a>; index++){</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="server__side__handshake_8c.html#ae4762df2fab238c5e19ac8fc390dd0f6">active_uart_server_connections</a>[client_index - 1].pin_pair.tx == flash_state-&gt;<a class="code hl_variable" href="structserver__persistent__state__t.html#ab908f61c0b69136dfbb1cc278eff310b">clients</a>[index].<a class="code hl_variable" href="structclient__t.html#a5d916d82885ebe03ded601fd524f0352">uart_connection</a>.<a class="code hl_variable" href="structuart__connection__t.html#abdca24a7155910ae76c80372de0e10da">pin_pair</a>.<a class="code hl_variable" href="structuart__pin__pair__t.html#a967afaf03544687cd0664506bc2ba75b">tx</a>){</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>            *flash_client_index = index;</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>        }   </div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>    }</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>}</div>
</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span> </div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span><span class="preprocessor">#endif</span></div>
<div class="ttc" id="aconfig_8h_html"><div class="ttname"><a href="config_8h.html">config.h</a></div><div class="ttdoc">Project-wide configuration constants for UART GPIO server.</div></div>
<div class="ttc" id="aconfig_8h_html_a2af0f36093c4b4dfb77395b7216135e1"><div class="ttname"><a href="config_8h.html#a2af0f36093c4b4dfb77395b7216135e1">MAX_SERVER_CONNECTIONS</a></div><div class="ttdeci">#define MAX_SERVER_CONNECTIONS</div><div class="ttdef"><b>Definition</b> config.h:46</div></div>
<div class="ttc" id="amenu_8h_html"><div class="ttname"><a href="menu_8h.html">menu.h</a></div><div class="ttdoc">User interface menu functions for the UART server.</div></div>
<div class="ttc" id="aserver_2main_8c_html_af0fed1de099fc59d4959ea2425d4a1f9"><div class="ttname"><a href="server_2main_8c.html#af0fed1de099fc59d4959ea2425d4a1f9">uart_lock</a></div><div class="ttdeci">spin_lock_t * uart_lock</div><div class="ttdef"><b>Definition</b> main.c:27</div></div>
<div class="ttc" id="aserver_8h_html_a050f4f15325b256ffb95a79c912dcb09"><div class="ttname"><a href="server_8h.html#a050f4f15325b256ffb95a79c912dcb09">server_set_device_state_and_update_flash</a></div><div class="ttdeci">void server_set_device_state_and_update_flash(uart_pin_pair_t pin_pair, uart_inst_t *uart_instance, uint8_t gpio_index, bool device_state, uint32_t flash_client_index)</div><div class="ttdoc">Sets the state of a single device and updates flash accordingly.</div><div class="ttdef"><b>Definition</b> state_apply.c:52</div></div>
<div class="ttc" id="aserver_8h_html_a22814c8a3091271ff0f644b78fbf5bd3"><div class="ttname"><a href="server_8h.html#a22814c8a3091271ff0f644b78fbf5bd3">save_running_configuration_into_preset_configuration</a></div><div class="ttdeci">void save_running_configuration_into_preset_configuration(uint32_t flash_configuration_index, uint32_t flash_client_index)</div><div class="ttdoc">Saves the current running configuration of a client into a preset slot.</div><div class="ttdef"><b>Definition</b> state_apply.c:61</div></div>
<div class="ttc" id="aserver_8h_html_a25bc83fc3a5ae9f2471e14000a7aabd1"><div class="ttname"><a href="server_8h.html#a25bc83fc3a5ae9f2471e14000a7aabd1">reset_all_client_data</a></div><div class="ttdeci">void reset_all_client_data(uint32_t flash_client_index)</div><div class="ttdoc">Resets all configuration data for a specified client.</div><div class="ttdef"><b>Definition</b> state_apply.c:133</div></div>
<div class="ttc" id="aserver_8h_html_a32876b443b0945b7f0a82cd1cb8dae68"><div class="ttname"><a href="server_8h.html#a32876b443b0945b7f0a82cd1cb8dae68">send_fast_blink_onboard_led_to_clients</a></div><div class="ttdeci">void send_fast_blink_onboard_led_to_clients()</div><div class="ttdoc">Sends a fast onboard LED blink signal to all clients.</div><div class="ttdef"><b>Definition</b> client_communication.c:126</div></div>
<div class="ttc" id="aserver_8h_html_a3824f1d29b9101a5d32bc4938d10305c"><div class="ttname"><a href="server_8h.html#a3824f1d29b9101a5d32bc4938d10305c">server_print_state_devices</a></div><div class="ttdeci">void server_print_state_devices(const client_state_t *client_state)</div><div class="ttdoc">Prints the state of all devices from a given client state structure.</div><div class="ttdef"><b>Definition</b> state_print.c:45</div></div>
<div class="ttc" id="aserver_8h_html_a3f6bebbfab4e97a7b23a5268f4d66869"><div class="ttname"><a href="server_8h.html#a3f6bebbfab4e97a7b23a5268f4d66869">server_configure_persistent_state</a></div><div class="ttdeci">void server_configure_persistent_state(server_persistent_state_t *server_persistent_state)</div><div class="ttdoc">Fills the entire persistent state structure and saves it to flash.</div><div class="ttdef"><b>Definition</b> state_config.c:113</div></div>
<div class="ttc" id="aserver_8h_html_a42c8df3599e5bf75f043b1d59e83e730"><div class="ttname"><a href="server_8h.html#a42c8df3599e5bf75f043b1d59e83e730">get_active_client_connection_index_from_flash_client_index</a></div><div class="ttdeci">uint32_t get_active_client_connection_index_from_flash_client_index(uint32_t flash_client_index, server_persistent_state_t state)</div><div class="ttdoc">Retrieves the index of an active client connection matching a flash-stored client.</div><div class="ttdef"><b>Definition</b> state_handling.c:22</div></div>
<div class="ttc" id="aserver_8h_html_a5373fcd0050ee1a3cccb2d3f7096b489"><div class="ttname"><a href="server_8h.html#a5373fcd0050ee1a3cccb2d3f7096b489">signal_reset_for_all_clients</a></div><div class="ttdeci">void signal_reset_for_all_clients()</div><div class="ttdoc">Sends a reset trigger message to all clients.</div><div class="ttdef"><b>Definition</b> client_communication.c:122</div></div>
<div class="ttc" id="aserver_8h_html_a53e73d8096b04a30d2349aca5910e7e0"><div class="ttname"><a href="server_8h.html#a53e73d8096b04a30d2349aca5910e7e0">find_corect_client_index_from_flash</a></div><div class="ttdeci">void find_corect_client_index_from_flash(uint32_t *flash_client_index, uint32_t client_index, const server_persistent_state_t *flash_state)</div><div class="ttdoc">Finds the corresponding flash client index for a given active client.</div><div class="ttdef"><b>Definition</b> server.h:352</div></div>
<div class="ttc" id="aserver_8h_html_a5d6522f51f2e82efecc7bc7554ade2d0"><div class="ttname"><a href="server_8h.html#a5d6522f51f2e82efecc7bc7554ade2d0">load_configuration_into_running_state</a></div><div class="ttdeci">void load_configuration_into_running_state(uint32_t flash_configuration_index, uint32_t flash_client_index)</div><div class="ttdoc">Loads a saved preset configuration into a client&#39;s running state.</div><div class="ttdef"><b>Definition</b> state_apply.c:77</div></div>
<div class="ttc" id="aserver_8h_html_a5dc7da044bb632212f8b68cfaf3f598c"><div class="ttname"><a href="server_8h.html#a5dc7da044bb632212f8b68cfaf3f598c">periodic_wakeup</a></div><div class="ttdeci">void periodic_wakeup(void)</div><div class="ttdoc">Core1 wakeup handler triggered by inter-core messages.</div><div class="ttdef"><b>Definition</b> main.c:52</div></div>
<div class="ttc" id="aserver_8h_html_a6ba1f5041dc967797351dc7bb856df3b"><div class="ttname"><a href="server_8h.html#a6ba1f5041dc967797351dc7bb856df3b">reset_preset_configuration</a></div><div class="ttdeci">void reset_preset_configuration(uint32_t flash_client_index, uint32_t flash_configuration_index)</div><div class="ttdoc">Resets a specific preset configuration for a given client in flash.</div><div class="ttdef"><b>Definition</b> state_apply.c:173</div></div>
<div class="ttc" id="aserver_8h_html_a725e67537885c5d35871e1875db7506c"><div class="ttname"><a href="server_8h.html#a725e67537885c5d35871e1875db7506c">load_server_state</a></div><div class="ttdeci">bool load_server_state(server_persistent_state_t *out_state)</div><div class="ttdoc">Loads the server state from flash and validates it using CRC32.</div><div class="ttdef"><b>Definition</b> state_flash.c:49</div></div>
<div class="ttc" id="aserver_8h_html_a85446e6a4007b664f2fb03cfa588e092"><div class="ttname"><a href="server_8h.html#a85446e6a4007b664f2fb03cfa588e092">server_send_client_state</a></div><div class="ttdeci">void server_send_client_state(uart_pin_pair_t pin_pair, uart_inst_t *uart, const client_state_t *state)</div><div class="ttdoc">Sends the entire current client state over UART.</div><div class="ttdef"><b>Definition</b> client_communication.c:136</div></div>
<div class="ttc" id="aserver_8h_html_a86c2e540fb9fb9aa0d840f81679a5fdb"><div class="ttname"><a href="server_8h.html#a86c2e540fb9fb9aa0d840f81679a5fdb">server_load_running_states_to_active_clients</a></div><div class="ttdeci">void server_load_running_states_to_active_clients(void)</div><div class="ttdoc">Loads saved GPIO states from flash and sends them to active clients.</div><div class="ttdef"><b>Definition</b> state_handling.c:81</div></div>
<div class="ttc" id="aserver_8h_html_a94d7bf2a7f0be569d87b14fe3524395d"><div class="ttname"><a href="server_8h.html#a94d7bf2a7f0be569d87b14fe3524395d">server_reset_configuration</a></div><div class="ttdeci">void server_reset_configuration(client_state_t *client_state)</div><div class="ttdoc">Resets the runtime GPIO configuration for a given client.</div><div class="ttdef"><b>Definition</b> state_config.c:126</div></div>
<div class="ttc" id="aserver_8h_html_aa248b21af874055c05e39588ac3b50b4"><div class="ttname"><a href="server_8h.html#aa248b21af874055c05e39588ac3b50b4">reset_running_configuration</a></div><div class="ttdeci">void reset_running_configuration(uint32_t flash_client_index)</div><div class="ttdoc">Resets the running configuration of a specified client to its default state.</div><div class="ttdef"><b>Definition</b> state_apply.c:154</div></div>
<div class="ttc" id="aserver_8h_html_ab0091cab79fc6a26dec5a260c238e5b5"><div class="ttname"><a href="server_8h.html#ab0091cab79fc6a26dec5a260c238e5b5">server_print_running_client_state</a></div><div class="ttdeci">void server_print_running_client_state(const client_t *client)</div><div class="ttdoc">Prints the current GPIO state for a given client.</div><div class="ttdef"><b>Definition</b> state_print.c:51</div></div>
<div class="ttc" id="aserver_8h_html_ab855eab340123db70c04fa5c11b7a030"><div class="ttname"><a href="server_8h.html#ab855eab340123db70c04fa5c11b7a030">send_uart_message_safe</a></div><div class="ttdeci">void send_uart_message_safe(uart_inst_t *uart, uart_pin_pair_t pins, const char *msg)</div><div class="ttdoc">Sends a UART message safely using spinlock protection.</div><div class="ttdef"><b>Definition</b> client_communication.c:25</div></div>
<div class="ttc" id="aserver_8h_html_abab7af7564d7d10ad8fd3e632066408e"><div class="ttname"><a href="server_8h.html#abab7af7564d7d10ad8fd3e632066408e">set_configuration_devices</a></div><div class="ttdeci">void set_configuration_devices(uint32_t flash_client_index, uint32_t flash_configuration_index, input_client_data_t *client_data)</div><div class="ttdoc">Configures the devices for a given client and preset configuration index.</div><div class="ttdef"><b>Definition</b> state_apply.c:105</div></div>
<div class="ttc" id="aserver_8h_html_abef816bc7a87ae61e1da71a2d0c5da91"><div class="ttname"><a href="server_8h.html#abef816bc7a87ae61e1da71a2d0c5da91">server_find_connections</a></div><div class="ttdeci">bool server_find_connections(void)</div><div class="ttdoc">Scans all possible UART pin pairs to detect connected clients.</div><div class="ttdef"><b>Definition</b> server_side_handshake.c:138</div></div>
<div class="ttc" id="aserver_8h_html_abf00606cee7fb1a66191388be08ac24b"><div class="ttname"><a href="server_8h.html#abf00606cee7fb1a66191388be08ac24b">client_has_active_devices</a></div><div class="ttdeci">bool client_has_active_devices(client_t client)</div><div class="ttdoc">Checks if a client has any active (ON) devices.</div><div class="ttdef"><b>Definition</b> state_handling.c:31</div></div>
<div class="ttc" id="aserver_8h_html_abf6b2d1e49b4c895c9672070cb2d1c98"><div class="ttname"><a href="server_8h.html#abf6b2d1e49b4c895c9672070cb2d1c98">send_dormant_flag_to_client</a></div><div class="ttdeci">void send_dormant_flag_to_client(uint8_t client_index)</div><div class="ttdoc">Sends a dormant flag message to a specific client over UART.</div><div class="ttdef"><b>Definition</b> client_communication.c:62</div></div>
<div class="ttc" id="aserver_8h_html_ac3717ffc0c3e393f14d1114bb67a0a5e"><div class="ttname"><a href="server_8h.html#ac3717ffc0c3e393f14d1114bb67a0a5e">send_dormant_to_standby_clients</a></div><div class="ttdeci">void send_dormant_to_standby_clients(void)</div><div class="ttdoc">Sends a dormant message to all clients marked as dormant.</div><div class="ttdef"><b>Definition</b> client_communication.c:130</div></div>
<div class="ttc" id="aserver_8h_html_ad2a8b81914e338148d4ca14af0dda019"><div class="ttname"><a href="server_8h.html#ad2a8b81914e338148d4ca14af0dda019">send_wakeup_if_dormant</a></div><div class="ttdeci">void send_wakeup_if_dormant(uint32_t flash_client_index, server_persistent_state_t *const state, uart_pin_pair_t pin_pair, uart_inst_t *const uart)</div><div class="ttdoc">Wakes up a dormant client if needed, based on its persistent state.</div><div class="ttdef"><b>Definition</b> client_communication.c:55</div></div>
<div class="ttc" id="aserver_8h_html_aec66c7eb323e49b6801199d373793161"><div class="ttname"><a href="server_8h.html#aec66c7eb323e49b6801199d373793161">server_print_client_preset_configuration</a></div><div class="ttdeci">void server_print_client_preset_configuration(const client_t *client, uint8_t client_preset_index)</div><div class="ttdoc">Prints a saved preset configuration for a given client.</div><div class="ttdef"><b>Definition</b> state_print.c:56</div></div>
<div class="ttc" id="aserver_8h_html_af79794cc92a2bd9e49d0552ef190126c"><div class="ttname"><a href="server_8h.html#af79794cc92a2bd9e49d0552ef190126c">server_print_client_preset_configurations</a></div><div class="ttdeci">void server_print_client_preset_configurations(const client_t *client)</div><div class="ttdoc">Prints all preset configurations for a client.</div><div class="ttdef"><b>Definition</b> state_print.c:63</div></div>
<div class="ttc" id="aserver__side__handshake_8c_html_aa1ef43f549692dec740d6140a38acbd1"><div class="ttname"><a href="server__side__handshake_8c.html#aa1ef43f549692dec740d6140a38acbd1">active_server_connections_number</a></div><div class="ttdeci">uint8_t active_server_connections_number</div><div class="ttdoc">Number of active connections found and stored in active_uart_server_connections.</div><div class="ttdef"><b>Definition</b> server_side_handshake.c:23</div></div>
<div class="ttc" id="aserver__side__handshake_8c_html_ae4762df2fab238c5e19ac8fc390dd0f6"><div class="ttname"><a href="server__side__handshake_8c.html#ae4762df2fab238c5e19ac8fc390dd0f6">active_uart_server_connections</a></div><div class="ttdeci">server_uart_connection_t active_uart_server_connections[MAX_SERVER_CONNECTIONS]</div><div class="ttdoc">Active UART server connections detected at runtime.</div><div class="ttdef"><b>Definition</b> server_side_handshake.c:22</div></div>
<div class="ttc" id="astate__flash_8c_html_a8e07211acfc66931f993aef0c3c6c7fb"><div class="ttname"><a href="state__flash_8c.html#a8e07211acfc66931f993aef0c3c6c7fb">save_server_state</a></div><div class="ttdeci">void __not_in_flash_func save_server_state(const server_persistent_state_t *state_in)</div><div class="ttdoc">Saves the persistent server state structure to flash memory.</div><div class="ttdef"><b>Definition</b> state_flash.c:61</div></div>
<div class="ttc" id="astructclient__state__t_html"><div class="ttname"><a href="structclient__state__t.html">client_state_t</a></div><div class="ttdoc">Represents the current or saved state of a client&#39;s GPIO devices.</div><div class="ttdef"><b>Definition</b> types.h:78</div></div>
<div class="ttc" id="astructclient__t_html"><div class="ttname"><a href="structclient__t.html">client_t</a></div><div class="ttdoc">Represents a complete client entry in the system.</div><div class="ttdef"><b>Definition</b> types.h:88</div></div>
<div class="ttc" id="astructclient__t_html_a5d916d82885ebe03ded601fd524f0352"><div class="ttname"><a href="structclient__t.html#a5d916d82885ebe03ded601fd524f0352">client_t::uart_connection</a></div><div class="ttdeci">uart_connection_t uart_connection</div><div class="ttdef"><b>Definition</b> types.h:91</div></div>
<div class="ttc" id="astructinput__client__data__t_html"><div class="ttname"><a href="structinput__client__data__t.html">input_client_data_t</a></div><div class="ttdoc">Stores all user-selected input values required for client-related operations.</div><div class="ttdef"><b>Definition</b> types.h:119</div></div>
<div class="ttc" id="astructserver__persistent__state__t_html"><div class="ttname"><a href="structserver__persistent__state__t.html">server_persistent_state_t</a></div><div class="ttdoc">Full persistent state saved in flash.</div><div class="ttdef"><b>Definition</b> types.h:100</div></div>
<div class="ttc" id="astructserver__persistent__state__t_html_ab908f61c0b69136dfbb1cc278eff310b"><div class="ttname"><a href="structserver__persistent__state__t.html#ab908f61c0b69136dfbb1cc278eff310b">server_persistent_state_t::clients</a></div><div class="ttdeci">client_t clients[MAX_SERVER_CONNECTIONS]</div><div class="ttdef"><b>Definition</b> types.h:101</div></div>
<div class="ttc" id="astructserver__uart__connection__t_html"><div class="ttname"><a href="structserver__uart__connection__t.html">server_uart_connection_t</a></div><div class="ttdoc">Represents an active UART connection detected by the server.</div><div class="ttdef"><b>Definition</b> types.h:56</div></div>
<div class="ttc" id="astructuart__connection__t_html_abdca24a7155910ae76c80372de0e10da"><div class="ttname"><a href="structuart__connection__t.html#abdca24a7155910ae76c80372de0e10da">uart_connection_t::pin_pair</a></div><div class="ttdeci">uart_pin_pair_t pin_pair</div><div class="ttdef"><b>Definition</b> types.h:47</div></div>
<div class="ttc" id="astructuart__pin__pair__t_html"><div class="ttname"><a href="structuart__pin__pair__t.html">uart_pin_pair_t</a></div><div class="ttdoc">Represents a UART TX/RX pin pair.</div><div class="ttdef"><b>Definition</b> types.h:21</div></div>
<div class="ttc" id="astructuart__pin__pair__t_html_a967afaf03544687cd0664506bc2ba75b"><div class="ttname"><a href="structuart__pin__pair__t.html#a967afaf03544687cd0664506bc2ba75b">uart_pin_pair_t::tx</a></div><div class="ttdeci">uint8_t tx</div><div class="ttdef"><b>Definition</b> types.h:22</div></div>
<div class="ttc" id="atypes_8h_html"><div class="ttname"><a href="types_8h.html">types.h</a></div><div class="ttdoc">Defines core data structures used for UART communication and device control.</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a href="server_8h.html">server.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>

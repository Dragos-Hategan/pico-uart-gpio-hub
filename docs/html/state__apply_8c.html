<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Pico UART GPIO Hub: src/server/state_apply.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Pico UART GPIO Hub
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('state__apply_8c.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">state_apply.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Handles configuration management and device state updates for connected UART clients.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;string.h&gt;</code><br />
<code>#include &quot;<a class="el" href="server_8h_source.html">server.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="input_8h_source.html">input.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a96a8dac2994f46fe16d7792300845bb3" id="r_a96a8dac2994f46fe16d7792300845bb3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a96a8dac2994f46fe16d7792300845bb3">server_send_device_state</a> (<a class="el" href="structuart__pin__pair__t.html">uart_pin_pair_t</a> pin_pair, uart_inst_t *uart, uint8_t gpio_number, bool is_on, <a class="el" href="structserver__persistent__state__t.html">server_persistent_state_t</a> *const state, uint32_t flash_client_index)</td></tr>
<tr class="memdesc:a96a8dac2994f46fe16d7792300845bb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends the current state of a GPIO to a client device via UART.  <br /></td></tr>
<tr class="memitem:a050f4f15325b256ffb95a79c912dcb09" id="r_a050f4f15325b256ffb95a79c912dcb09"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a050f4f15325b256ffb95a79c912dcb09">server_set_device_state_and_update_flash</a> (<a class="el" href="structuart__pin__pair__t.html">uart_pin_pair_t</a> pin_pair, uart_inst_t *uart_instance, uint8_t gpio_index, bool device_state, uint32_t flash_client_index)</td></tr>
<tr class="memdesc:a050f4f15325b256ffb95a79c912dcb09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the state of a single device and updates flash accordingly.  <br /></td></tr>
<tr class="memitem:a22814c8a3091271ff0f644b78fbf5bd3" id="r_a22814c8a3091271ff0f644b78fbf5bd3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a22814c8a3091271ff0f644b78fbf5bd3">save_running_configuration_into_preset_configuration</a> (uint32_t flash_configuration_index, uint32_t flash_client_index)</td></tr>
<tr class="memdesc:a22814c8a3091271ff0f644b78fbf5bd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves the current running configuration of a client into a preset slot.  <br /></td></tr>
<tr class="memitem:a5d6522f51f2e82efecc7bc7554ade2d0" id="r_a5d6522f51f2e82efecc7bc7554ade2d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5d6522f51f2e82efecc7bc7554ade2d0">load_configuration_into_running_state</a> (uint32_t flash_configuration_index, uint32_t flash_client_index)</td></tr>
<tr class="memdesc:a5d6522f51f2e82efecc7bc7554ade2d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads a saved preset configuration into a client's running state.  <br /></td></tr>
<tr class="memitem:a27c7ce597f04b517c865ad20d34956a8" id="r_a27c7ce597f04b517c865ad20d34956a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a27c7ce597f04b517c865ad20d34956a8">set_configuration_devices</a> (uint32_t flash_client_index, uint32_t flash_configuration_index, <a class="el" href="structinput__client__data__t.html">input_client_data_t</a> *input_client_data)</td></tr>
<tr class="memdesc:a27c7ce597f04b517c865ad20d34956a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures the devices for a given client and preset configuration index.  <br /></td></tr>
<tr class="memitem:a25bc83fc3a5ae9f2471e14000a7aabd1" id="r_a25bc83fc3a5ae9f2471e14000a7aabd1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a25bc83fc3a5ae9f2471e14000a7aabd1">reset_all_client_data</a> (uint32_t flash_client_index)</td></tr>
<tr class="memdesc:a25bc83fc3a5ae9f2471e14000a7aabd1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets all configuration data for a specified client.  <br /></td></tr>
<tr class="memitem:aa248b21af874055c05e39588ac3b50b4" id="r_aa248b21af874055c05e39588ac3b50b4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa248b21af874055c05e39588ac3b50b4">reset_running_configuration</a> (uint32_t flash_client_index)</td></tr>
<tr class="memdesc:aa248b21af874055c05e39588ac3b50b4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the running configuration of a specified client to its default state.  <br /></td></tr>
<tr class="memitem:a6ba1f5041dc967797351dc7bb856df3b" id="r_a6ba1f5041dc967797351dc7bb856df3b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6ba1f5041dc967797351dc7bb856df3b">reset_preset_configuration</a> (uint32_t flash_client_index, uint32_t flash_configuration_index)</td></tr>
<tr class="memdesc:a6ba1f5041dc967797351dc7bb856df3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets a specific preset configuration for a given client in flash.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Handles configuration management and device state updates for connected UART clients. </p>
<p>This module provides functionality to:</p><ul>
<li>Send GPIO state updates to individual clients</li>
<li>Save and load preset configurations for each client</li>
<li>Reset running or preset client configurations</li>
<li>Apply user input to modify preset configurations</li>
</ul>
<p>Used by the server to manage persistent client data and push changes over UART with synchronization and power state awareness.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="structserver__persistent__state__t.html" title="Full persistent state saved in flash.">server_persistent_state_t</a> </dd>
<dd>
<a class="el" href="structclient__state__t.html" title="Represents the current or saved state of a client&#39;s GPIO devices.">client_state_t</a> </dd>
<dd>
<a class="el" href="structinput__client__data__t.html" title="Stores all user-selected input values required for client-related operations.">input_client_data_t</a> </dd></dl>
</div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a5d6522f51f2e82efecc7bc7554ade2d0" name="a5d6522f51f2e82efecc7bc7554ade2d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d6522f51f2e82efecc7bc7554ade2d0">&#9670;&#160;</a></span>load_configuration_into_running_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void load_configuration_into_running_state </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>flash_configuration_index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>flash_client_index</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads a saved preset configuration into a client's running state. </p>
<p>Copies the selected preset configuration into the client's current state, sends the new state to the client via UART, and updates the persistent flash. If the loaded configuration results in all devices being OFF, the client is marked as dormant.</p>
<p>A confirmation message is printed to the USB CLI.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flash_configuration_index</td><td>Index of the preset configuration to load. </td></tr>
    <tr><td class="paramname">flash_client_index</td><td>Index of the target client in the persistent flash state. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a25bc83fc3a5ae9f2471e14000a7aabd1" name="a25bc83fc3a5ae9f2471e14000a7aabd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25bc83fc3a5ae9f2471e14000a7aabd1">&#9670;&#160;</a></span>reset_all_client_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reset_all_client_data </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>flash_client_index</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resets all configuration data for a specified client. </p>
<p>This includes:</p><ul>
<li>Resetting the client's current (running) configuration</li>
<li>Sending the reset state to the client via UART</li>
<li>Marking the client as dormant</li>
<li>Resetting all preset configurations associated with the client</li>
<li>Saving the updated state to flash</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flash_client_index</td><td>Index of the client in the persistent flash state array. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a6ba1f5041dc967797351dc7bb856df3b" name="a6ba1f5041dc967797351dc7bb856df3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ba1f5041dc967797351dc7bb856df3b">&#9670;&#160;</a></span>reset_preset_configuration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reset_preset_configuration </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>flash_client_index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>flash_configuration_index</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resets a specific preset configuration for a given client in flash. </p>
<p>This function loads the current persistent server state from flash, resets the specified preset configuration for the given client (excluding UART flags), and then saves the updated state back to flash memory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">flash_client_index</td><td>Index of the client in the flash-stored client list. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flash_configuration_index</td><td>Index of the preset configuration to reset (1-based). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa248b21af874055c05e39588ac3b50b4" name="aa248b21af874055c05e39588ac3b50b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa248b21af874055c05e39588ac3b50b4">&#9670;&#160;</a></span>reset_running_configuration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reset_running_configuration </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>flash_client_index</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resets the running configuration of a specified client to its default state. </p>
<p>Loads the server's persistent state, resets the client's current configuration, sends the updated state to the client, marks the client as dormant, and saves the updated state back to flash.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flash_client_index</td><td>Index of the client in the persistent flash state array. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a22814c8a3091271ff0f644b78fbf5bd3" name="a22814c8a3091271ff0f644b78fbf5bd3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22814c8a3091271ff0f644b78fbf5bd3">&#9670;&#160;</a></span>save_running_configuration_into_preset_configuration()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void save_running_configuration_into_preset_configuration </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>flash_configuration_index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>flash_client_index</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saves the current running configuration of a client into a preset slot. </p>
<p>Loads the full persistent server state from flash, copies the active running state of the specified client into the selected preset configuration slot, and saves the updated structure back to flash.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flash_configuration_index</td><td>Index of the target preset configuration [0..(NUMBER_OF_POSSIBLE_PRESETS - 1)]. </td></tr>
    <tr><td class="paramname">flash_client_index</td><td>Index of the client within the persistent flash state. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a96a8dac2994f46fe16d7792300845bb3" name="a96a8dac2994f46fe16d7792300845bb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a96a8dac2994f46fe16d7792300845bb3">&#9670;&#160;</a></span>server_send_device_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void server_send_device_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structuart__pin__pair__t.html">uart_pin_pair_t</a></td>          <td class="paramname"><span class="paramname"><em>pin_pair</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uart_inst_t *</td>          <td class="paramname"><span class="paramname"><em>uart</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>gpio_number</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>is_on</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structserver__persistent__state__t.html">server_persistent_state_t</a> *const</td>          <td class="paramname"><span class="paramname"><em>state</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>flash_client_index</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends the current state of a GPIO to a client device via UART. </p>
<p>Wakes up the specified client using a TX pulse and then sends a message representing the GPIO number and its current state (ON or OFF) in the format "[N,S]", where <span class="tt">N</span> is the GPIO number and <span class="tt">S</span> is 1 (ON) or 0 (OFF).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pin_pair</td><td>UART TX/RX pin pair used for the target client. </td></tr>
    <tr><td class="paramname">uart</td><td>Pointer to the UART instance used for transmission. </td></tr>
    <tr><td class="paramname">gpio_number</td><td>The GPIO number whose state is being sent. </td></tr>
    <tr><td class="paramname">is_on</td><td>The current state of the GPIO (<span class="tt">true</span> for ON, <span class="tt">false</span> for OFF). </td></tr>
    <tr><td class="paramname">state</td><td>Pointer to the global server persistent state (used to access client status). </td></tr>
    <tr><td class="paramname">flash_client_index</td><td>Index of the client in the persistent state table.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function uses <span class="tt"><a class="el" href="client__communication_8c.html#ad2a8b81914e338148d4ca14af0dda019" title="Wakes up a dormant client if needed, based on its persistent state.">send_wakeup_if_dormant()</a></span> before sending the state, ensuring the client is awake before communication.</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="client__communication_8c.html#ad2a8b81914e338148d4ca14af0dda019" title="Wakes up a dormant client if needed, based on its persistent state.">send_wakeup_if_dormant()</a> </dd>
<dd>
<a class="el" href="client__communication_8c.html#ab855eab340123db70c04fa5c11b7a030" title="Sends a UART message safely using spinlock protection.">send_uart_message_safe()</a> </dd></dl>

</div>
</div>
<a id="a050f4f15325b256ffb95a79c912dcb09" name="a050f4f15325b256ffb95a79c912dcb09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a050f4f15325b256ffb95a79c912dcb09">&#9670;&#160;</a></span>server_set_device_state_and_update_flash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void server_set_device_state_and_update_flash </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structuart__pin__pair__t.html">uart_pin_pair_t</a></td>          <td class="paramname"><span class="paramname"><em>pin_pair</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uart_inst_t *</td>          <td class="paramname"><span class="paramname"><em>uart_instance</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>gpio_index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>device_state</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>flash_client_index</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the state of a single device and updates flash accordingly. </p>
<ul>
<li>Sends the updated GPIO state to the client via UART.</li>
<li>Loads a copy of the persistent state from flash.</li>
<li>Updates the state in RAM and saves the structure back to flash.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pin_pair</td><td>TX/RX pins for the UART connection to the client. </td></tr>
    <tr><td class="paramname">uart_instance</td><td>UART peripheral used. </td></tr>
    <tr><td class="paramname">gpio_index</td><td>GPIO number to modify on the client. </td></tr>
    <tr><td class="paramname">device_state</td><td>true = ON, false = OFF. </td></tr>
    <tr><td class="paramname">flash_client_index</td><td>Index of the client in flash storage. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a27c7ce597f04b517c865ad20d34956a8" name="a27c7ce597f04b517c865ad20d34956a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27c7ce597f04b517c865ad20d34956a8">&#9670;&#160;</a></span>set_configuration_devices()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_configuration_devices </td>
          <td>(</td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>flash_client_index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t</td>          <td class="paramname"><span class="paramname"><em>flash_configuration_index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structinput__client__data__t.html">input_client_data_t</a> *</td>          <td class="paramname"><span class="paramname"><em>client_data</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures the devices for a given client and preset configuration index. </p>
<p>This function enters an interactive loop where the user can set the ON/OFF state for specific devices (GPIOs) of a selected client. The changes are stored in the specified preset configuration index within the server's persistent state.</p>
<p>The loop continues to prompt the user for device index and state until the input routine signals an exit (typically via a cancel command or invalid input).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flash_client_index</td><td>Index of the client in flash memory (persistent state). </td></tr>
    <tr><td class="paramname">flash_configuration_index</td><td>Index of the preset configuration to modify. </td></tr>
    <tr><td class="paramname">client_data</td><td>Pointer to a structure used for passing user input data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a href="dir_075bb3ff235063c77951cd176d15a741.html">server</a></li><li class="navelem"><a href="state__apply_8c.html">state_apply.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
